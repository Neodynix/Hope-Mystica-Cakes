<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Hope Mystica Cakes</title>
    
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    <script src="scripts/admin.js" defer></script>
</head>

<body>

    <!-- LOGIN SCREEN (shown by default) -->
    <div id="login-overlay" class="login-screen">
        <div class="login-box">
            <h2>Admin Login</h2>
            <p>Sign in to manage Hope Mystica Cakes</p>

            <form id="login-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="admin@example.com" required autocomplete="email">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="••••••••" required autocomplete="current-password">
                </div>

                <button type="submit" class="btn-login" id="login-btn">Sign In</button>
                <p id="login-message" class="message"></p>
            </form>
        </div>
    </div>

    <!-- ADMIN DASHBOARD (hidden until logged in) -->
    <div id="admin-main" class="hidden">
        <header class="admin-header">
    <nav class="container">
        <div class="logo">Hope Mystica <span>Admin Panel</span></div>

        <!-- Desktop / wide screen items -->
        <div class="header-actions desktop-actions">
            <span id="current-user-email"></span>
            <button id="logout-btn" class="btn-logout">Logout</button>
            <a href="index.html" class="view-site-btn">View Website</a>
        </div>

        <!-- Hamburger for mobile -->
        <button class="hamburger" aria-label="Toggle menu" id="hamburger-btn">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Mobile menu (hidden by default) -->
        <div class="mobile-menu" id="mobile-menu">
            <span id="mobile-user-email"></span>
            <button id="mobile-logout-btn" class="btn-logout">Logout</button>
            <a href="index.html" class="view-site-btn">View Website</a>
        </div>
    </nav>
        </header>

        <main class="admin-content">
            <div class="container">

                <section class="upload-section">
                    <h2><i class="fas fa-plus-circle"></i> Add New Cake</h2>
                    <form id="add-cake-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Title *</label>
                                <input type="text" id="title" placeholder="e.g., Chocolate Truffle" required>
                            </div>

                            <div class="form-group">
                                <label>Category *</label>
                                <select id="category" required>
                                    <option value="">Select category</option>
                                    <option value="Wedding & Kwanjula Cakes">Wedding & Kwanjula Cakes</option>
                                    <option value="Birthday & Kids Cakes">Birthday & Kids Cakes</option>
                                    <option value="Traditional & Special Flavours">Traditional & Special Flavours</option>
                                    <option value="Luxury & Custom Cakes">Luxury & Custom Cakes</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Weight (e.g., 3 kgs)</label>
                                <input type="text" id="weight" placeholder="e.g., 2 kgs">
                            </div>

                            <div class="form-group">
                                <label>Price (UGX)</label>
                                <input type="number" id="price" placeholder="e.g., 150000">
                            </div>

                            <div class="form-group full-width">
                                <label>Description</label>
                                <textarea id="description" rows="3" placeholder="Short description of the cake..."></textarea>
                            </div>

                            <div class="form-group full-width">
                                <label>Cake Image *</label>
                                <div class="file-upload-wrapper">
                                    <input type="file" id="image" accept="image/*" required>
                                    <label for="image" class="file-custom-btn">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <span id="file-name-display">Choose an image...</span>
                                    </label>
                                </div>

                                <div id="image-preview-container" class="hidden">
                                    <img id="image-preview" src="" alt="Selected Cake Preview">
                                    <button type="button" id="remove-img-btn" title="Remove image">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn-submit" id="submit-btn">Upload to Gallery</button>
                        <p id="message"></p>
                    </form>
                </section>

                <hr class="section-divider">

                <section class="list-section">
                    <h2><i class="fas fa-images"></i> Current Gallery</h2>
                    <div id="cakes-list" class="admin-grid"></div>
                </section>

            </div>
        </main>
    </div>

</body>
                        </html>
